"use strict";(self.webpackChunkdocusaurus_docs=self.webpackChunkdocusaurus_docs||[]).push([[7625],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>c});var r=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=r.createContext({}),p=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,l=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),m=p(n),c=i,h=m["".concat(l,".").concat(c)]||m[c]||d[c]||a;return n?r.createElement(h,s(s({ref:t},u),{},{components:n})):r.createElement(h,s({ref:t},u))}));function c(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,s=new Array(a);s[0]=m;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:i,s[1]=o;for(var p=2;p<a;p++)s[p]=n[p];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},39864:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>o,toc:()=>p});var r=n(87462),i=(n(67294),n(3905));const a={title:"Spot DMM Listing Integration",sidebar_label:"Spot DMM Listing Integration",sidebar_position:1},s=void 0,o={unversionedId:"institutional/dmm-listing/spot",id:"institutional/dmm-listing/spot",title:"Spot DMM Listing Integration",description:"Prerequisites",source:"@site/docs/institutional/dmm-listing/spot.mdx",sourceDirName:"institutional/dmm-listing",slug:"/institutional/dmm-listing/spot",permalink:"/docs/institutional/dmm-listing/spot",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Spot DMM Listing Integration",sidebar_label:"Spot DMM Listing Integration",sidebar_position:1},sidebar:"institutionalDocsSidebar",previous:{title:"SBE Public Trade Integration",permalink:"/docs/institutional/sbe/public-trade"}},l={},p=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Docs:",id:"docs",level:3},{value:"1. REST \u2013 Query Instrument Info (Spot)",id:"1-rest--query-instrument-info-spot",level:2},{value:"2. REST \u2013 Place a PostOnly Limit Order (Spot)",id:"2-rest--place-a-postonly-limit-order-spot",level:2},{value:"3. WebSocket \u2013 Authenticate + Place Spot Order",id:"3-websocket--authenticate--place-spot-order",level:2},{value:"Recommended Validation Checklist (for DMM onboarding)",id:"recommended-validation-checklist-for-dmm-onboarding",level:2},{value:"Tips on Pybit &amp; CCXT",id:"tips-on-pybit--ccxt",level:2},{value:"1. Pybit",id:"1-pybit",level:3},{value:"2. CCXT",id:"2-ccxt",level:3}],u={toc:p};function d(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Your UID is whitelisted for the pre-market / DMM instrument."),(0,i.kt)("li",{parentName:"ul"},"You have an API key + secret created under that UID."),(0,i.kt)("li",{parentName:"ul"},"Coin configured under specify UID"),(0,i.kt)("li",{parentName:"ul"},"For spot listing instruments, you must query /v5/market/instruments-info with:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"category=spot"),(0,i.kt)("li",{parentName:"ul"},"symbol=<SYMBOL_NAME>")))),(0,i.kt)("h3",{id:"docs"},"Docs:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Instruments info: ",(0,i.kt)("a",{parentName:"li",href:"/v5/account/instrument"},"Get Instruments Info")),(0,i.kt)("li",{parentName:"ul"},"REST place order: ",(0,i.kt)("a",{parentName:"li",href:"/v5/order/create-order"},"Place Order")),(0,i.kt)("li",{parentName:"ul"},"WebSocket trading guideline: ",(0,i.kt)("a",{parentName:"li",href:"/v5/websocket/trade/guideline"},"Websocket Trade Guideline"))),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"1-rest--query-instrument-info-spot"},"1. REST \u2013 Query Instrument Info (Spot)"),(0,i.kt)("p",null,"Use this to confirm the symbol is visible after whitelisting (tick size, lot size, status, etc.)."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"import requests\nimport time\nimport hashlib\nimport hmac\n\napi_key = 'xxxxxxxxx'\nsecret_key = 'xxxxxxxxx'\nsymbol = 'xxxxx'\nhttpClient = requests.Session()\nrecv_window = str(5000)\nurl = \"https://api.bybit.com\"\n\ndef HTTP_Request(endPoint, method, payload, Info):\n    global time_stamp\n    time_stamp = str(int(time.time() * 10 ** 3))\n    signature = genSignature(payload)\n    headers = {\n        'X-BAPI-API-KEY': api_key,\n        'X-BAPI-SIGN': signature,\n        'X-BAPI-SIGN-TYPE': '2',\n        'X-BAPI-TIMESTAMP': time_stamp,\n        'X-BAPI-RECV-WINDOW': recv_window,\n        'Content-Type': 'application/json'\n    }\n    if method == \"POST\":\n        response = httpClient.request(method, url + endPoint, headers=headers, data=payload)\n    else:\n        response = httpClient.request(method, url + endPoint + \"?\" + payload, headers=headers)\n    print(response.text)\n    print(response.headers)\n    print(Info + \" Elapsed Time : \" + str(response.elapsed))\n\ndef genSignature(payload):\n    param_str = str(time_stamp) + api_key + recv_window + payload\n    hash = hmac.new(bytes(secret_key, \"utf-8\"), param_str.encode(\"utf-8\"), hashlib.sha256)\n    signature = hash.hexdigest()\n    return signature\n\nendpoint = \"/v5/market/instruments-info\"\nmethod = \"GET\"\nparams = 'symbol=' + symbol + '&category=spot'\nHTTP_Request(endpoint, method, params, \"Get Symbol Details\")\n")),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"2-rest--place-a-postonly-limit-order-spot"},"2. REST \u2013 Place a PostOnly Limit Order (Spot)"),(0,i.kt)("p",null,"Note: PostOnly ensures maker intent. If the price crosses the book, the order may be rejected/cancelled depending on product rules."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'import requests\nimport time\nimport hashlib\nimport hmac\n\napi_key=\'xxxx\'\nsecret_key=\'xxxxx\'\nhttpClient=requests.Session()\nrecv_window=str(5000)\nurl="https://api-testnet.bybit.com"\nendpoint="/v5/order/create"\nmethod="POST"\nparams=\'{"category":"spot", "symbol":"XRPUSDT", "orderType":"LIMIT", "side":"buy", "qty":"10", "price":"0.55", "timeInForce":"PostOnly"}\'\n\ndef HTTP_Request(endPoint,method,payload,Info):\n    global time_stamp\n    time_stamp=str(int(time.time() * 10 ** 3))\n    signature=genSignature(payload)\n    headers = {\n        \'X-BAPI-API-KEY\': api_key,\n        \'X-BAPI-SIGN\': signature,\n        \'X-BAPI-SIGN-TYPE\': \'2\',\n        \'X-BAPI-TIMESTAMP\': time_stamp,\n        \'X-BAPI-RECV-WINDOW\': recv_window,\n        \'Content-Type\': \'application/json\'\n    }\n    if(method=="POST"):\n        response = httpClient.request(method, url+endPoint, headers=headers, data=payload)\n    else:\n        response = httpClient.request(method, url+endPoint+"?"+payload, headers=headers)\n    print(response.text)\n    print(response.headers)\n    print(Info + " Elapsed Time : " + str(response.elapsed))\n\ndef genSignature(payload):\n    param_str= str(time_stamp) + api_key + recv_window + payload\n    hash = hmac.new(bytes(secret_key, "utf-8"), param_str.encode("utf-8"),hashlib.sha256)\n    signature = hash.hexdigest()\n    return signature\n\nHTTP_Request(endpoint,method,params,"Create")\n')),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"3-websocket--authenticate--place-spot-order"},"3. WebSocket \u2013 Authenticate + Place Spot Order"),(0,i.kt)("p",null,"Use WebSocket trading endpoint to place orders with lower overhead vs REST.",(0,i.kt)("br",{parentName:"p"}),"\n","Make sure you use the correct WS host for your environment. For more details please refer to ",(0,i.kt)("a",{parentName:"p",href:"/v5/websocket/trade/guideline"},"Websocket Trade Guideline"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'import asyncio\nimport websockets\nimport json\nimport hmac\nimport hashlib\nfrom datetime import datetime\n\nasync def authenticate(ws):\n    api_key = "xxxxx"\n    api_secret = "xxxxxx"\n    expires = int((datetime.now().timestamp() + 10) * 1000)\n    signature = hmac.new(api_secret.encode(), f\'GET/realtime{expires}\'.encode(), hashlib.sha256).hexdigest()\n\n    auth_msg = {\n        "op": "auth",\n        "args": [api_key, expires, signature]\n    }\n\n    await ws.send(json.dumps(auth_msg))\n    response = await ws.recv()\n    print(f"Auth response: {response}")\n\nasync def spot_send_subscription(ws):\n    sub_msg = {\n        "header": {\n            "Referer": "Test-1",\n            "X-BAPI-RECV-WINDOW": "100000",\n            "X-BAPI-TIMESTAMP": str(int(datetime.now().timestamp() * 1000))\n        },\n        "op": "order.create",\n        "args": [\n            {\n                "category": "spot",\n                "symbol": "XRPUSDT",\n                "orderType": "LIMIT",\n                "side": "buy",\n                "qty": "10",\n                "price": "0.55",\n                "timeInForce": "PostOnly"\n            }\n        ]\n    }\n\n    await ws.send(json.dumps(sub_msg))\n    print("Subscription spot message sent.")\n\nasync def listen_messages(ws):\n    while True:\n        message = await ws.recv()\n        print(f"Message received: {message}")\n\nasync def main():\n    uri = "wss://stream-testnet.bybit.com/v5/trade"\n    async with websockets.connect(uri) as ws:\n        await authenticate(ws)\n        await spot_send_subscription(ws)\n        await listen_messages(ws)\n\nif __name__ == "__main__":\n    asyncio.run(main())\n')),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"recommended-validation-checklist-for-dmm-onboarding"},"Recommended Validation Checklist (for DMM onboarding)"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Instrument visibility  ")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"instruments-info returns the symbol and correct filters (tick size / lot size).")),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"Permissions  ")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"API key has trading permission; UID is correctly whitelisted.")),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},"Maker behavior  ")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"PostOnly order does not cross spread; otherwise expect rejection/cancel behavior.")),(0,i.kt)("ol",{start:4},(0,i.kt)("li",{parentName:"ol"},"Operational readiness  ")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Retry/backoff logic, idempotency strategy, and error-code handling.")),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"tips-on-pybit--ccxt"},"Tips on Pybit & CCXT"),(0,i.kt)("p",null,"If you are using Pybit or CCXT with the Bybit V5 endpoint and need to call the authenticated\nGET ",(0,i.kt)("inlineCode",{parentName:"p"},"/v5/account/instruments-info")," endpoint, please refer to the examples below."),(0,i.kt)("h3",{id:"1-pybit"},"1. Pybit"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Please upgrade Pybit to the latest version (5.14.0+)."),(0,i.kt)("li",{parentName:"ul"},"Pybit does not expose ",(0,i.kt)("inlineCode",{parentName:"li"},"/v5/account/instruments-info")," as a first-class method for now."),(0,i.kt)("li",{parentName:"ul"},"You can call this endpoint directly via ",(0,i.kt)("inlineCode",{parentName:"li"},"_submit_request")," with ",(0,i.kt)("inlineCode",{parentName:"li"},"auth=True"),".")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'from pybit.unified_trading import HTTP\n\nsession = HTTP(\n    testnet=False,\n    api_key="xxx",\n    api_secret="xxx",\n)\n\nresp = session._submit_request(\n    method="GET",\n    path=session.endpoint + "/v5/account/instruments-info",\n    query={"category": "spot"},\n    auth=True,\n)\nprint(resp)\n')),(0,i.kt)("h3",{id:"2-ccxt"},"2. CCXT"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Please upgrade CCXT to the latest version (4.3.75+)."),(0,i.kt)("li",{parentName:"ul"},"Enable ",(0,i.kt)("inlineCode",{parentName:"li"},"usePrivateInstrumentsInfo")," to query instruments info via the private endpoint.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"# option 1: provide upon instantiating\nexchange = ccxt.bybit({\n    'options': {\n        'usePrivateInstrumentsInfo': True,\n    }\n})\n\n# option 2: or set it after instantiating\nexchange.options['usePrivateInstrumentsInfo'] = True\n")))}d.isMDXComponent=!0}}]);