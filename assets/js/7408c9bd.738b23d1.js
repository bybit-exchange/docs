"use strict";(self.webpackChunkdocusaurus_docs=self.webpackChunkdocusaurus_docs||[]).push([[977],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>c});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=r.createContext({}),d=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},p=function(e){var n=d(e.components);return r.createElement(s.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},u=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),u=d(t),c=a,f=u["".concat(s,".").concat(c)]||u[c]||m[c]||i;return t?r.createElement(f,l(l({ref:n},p),{},{components:t})):r.createElement(f,l({ref:n},p))}));function c(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,l=new Array(i);l[0]=u;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var d=2;d<i;d++)l[d]=t[d];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},18058:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>m,frontMatter:()=>i,metadata:()=>o,toc:()=>d});var r=t(87462),a=(t(67294),t(3905));const i={title:"Fast Order Integration",sidebar_label:"Fast Order Integration",sidebar_position:1},l=void 0,o={unversionedId:"v5/sbe/fast-order/sbe-fast-order",id:"v5/sbe/fast-order/sbe-fast-order",title:"Fast Order Integration",description:"Overview",source:"@site/docs/v5/sbe/fast-order/sbe-fast-order.mdx",sourceDirName:"v5/sbe/fast-order",slug:"/v5/sbe/fast-order/sbe-fast-order",permalink:"/docs/v5/sbe/fast-order/sbe-fast-order",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Fast Order Integration",sidebar_label:"Fast Order Integration",sidebar_position:1},sidebar:"v5SideBar",previous:{title:"SBE Level 50 Integration",permalink:"/docs/v5/sbe/level-50/sbe-level-50"},next:{title:"Connect",permalink:"/docs/v5/ws/connect"}},s={},d=[{value:"Overview",id:"overview",level:2},{value:"Connection",id:"connection",level:2},{value:"Frame Type",id:"frame-type",level:3},{value:"Authentication",id:"authentication",level:2},{value:"Auth Request",id:"auth-request",level:3},{value:"Auth Success Response",id:"auth-success-response",level:3},{value:"Heartbeat",id:"heartbeat",level:2},{value:"Send Ping",id:"send-ping",level:3},{value:"Receive Pong",id:"receive-pong",level:3},{value:"Subscription",id:"subscription",level:2},{value:"Available Topics",id:"available-topics",level:3},{value:"Subscribe Example",id:"subscribe-example",level:3},{value:"Subscription Acknowledgment",id:"subscription-acknowledgment",level:3},{value:"Push Logic (fast.resp.order)",id:"push-logic-fastresporder",level:2},{value:"Scenario Coverage",id:"scenario-coverage",level:3},{value:"OrderLinkId Behavior by Version",id:"orderlinkid-behavior-by-version",level:2},{value:"Message Structure (SBE)",id:"message-structure-sbe",level:2},{value:"FastOrderResp Field Reference",id:"fastorderresp-field-reference",level:3},{value:"SBE XML Template (Fast Order Response)",id:"sbe-xml-template-fast-order-response",level:2},{value:"Binary Sample (as received)",id:"binary-sample-as-received",level:2},{value:"SBE Binary Message",id:"sbe-binary-message",level:2},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"Integration Script",id:"integration-script",level:2},{value:"Golang",id:"golang",level:3},{value:"Python",id:"python",level:3}],p={toc:d};function m(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"overview"},"Overview"),(0,a.kt)("p",null,"The ",(0,a.kt)("strong",{parentName:"p"},"Fast Order SBE Channel")," provides ultra-low-latency order push updates for high-frequency trading (HFT) clients through ",(0,a.kt)("strong",{parentName:"p"},"Market Maker WebSocket (MMWS)"),"."),(0,a.kt)("p",null,"It delivers binary-encoded ",(0,a.kt)("strong",{parentName:"p"},"SBE (Simple Binary Encoding)")," messages directly from the matching engine for fast order submission, amendment, and cancellation acknowledgements."),(0,a.kt)("p",null,"This channel is designed for ",(0,a.kt)("strong",{parentName:"p"},"speed and efficiency")," \u2014 it focuses on the latest updates and ",(0,a.kt)("strong",{parentName:"p"},"does not")," push passive events such as fills or system-initiated cancellations."),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"connection"},"Connection"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u26a0\ufe0f Use your ",(0,a.kt)("strong",{parentName:"p"},"dedicated MMWS host"),".",(0,a.kt)("br",{parentName:"p"}),"\n","This channel is ",(0,a.kt)("strong",{parentName:"p"},"not")," accessible from the standard WebSocket endpoints.")),(0,a.kt)("h3",{id:"frame-type"},"Frame Type"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"SBE messages are sent as ",(0,a.kt)("strong",{parentName:"li"},"binary frames")," (",(0,a.kt)("inlineCode",{parentName:"li"},"opcode = 2"),")."),(0,a.kt)("li",{parentName:"ul"},"Control frames (",(0,a.kt)("strong",{parentName:"li"},"auth"),", ",(0,a.kt)("strong",{parentName:"li"},"ping/pong"),", ",(0,a.kt)("strong",{parentName:"li"},"subscribe/unsubscribe"),") follow the ",(0,a.kt)("strong",{parentName:"li"},"Bybit V5 API JSON")," format.")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"authentication"},"Authentication"),(0,a.kt)("p",null,"Authentication is required immediately after establishing a connection."),(0,a.kt)("h3",{id:"auth-request"},"Auth Request"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "req_id": "10001",\n  "op": "auth",\n  "args": [\n    "api_key",\n    1662350400000,\n    "signature"\n  ]\n}\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"req_id")," \u2014 optional client identifier."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"timestamp")," \u2014 must be greater than the current time."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"signature")," \u2014 generated using the Bybit API signing algorithm.")),(0,a.kt)("h3",{id:"auth-success-response"},"Auth Success Response"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "success": true,\n  "ret_msg": "",\n  "op": "auth",\n  "conn_id": "cejreaspqfh3sjdnldmg-p"\n}\n')),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"heartbeat"},"Heartbeat"),(0,a.kt)("h3",{id:"send-ping"},"Send Ping"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{"req_id": "100001", "op": "ping"}\n')),(0,a.kt)("h3",{id:"receive-pong"},"Receive Pong"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "success": true,\n  "ret_msg": "pong",\n  "conn_id": "465772b1-7630-4fdc-a492-e003e6f0f260",\n  "req_id": "100001",\n  "op": "ping"\n}\n')),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"subscription"},"Subscription"),(0,a.kt)("h3",{id:"available-topics"},"Available Topics"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"order.sbe.resp.spot")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"order.sbe.resp.linear")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"order.sbe.resp.inverse")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"order.sbe.resp.option"))),(0,a.kt)("h3",{id:"subscribe-example"},"Subscribe Example"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "op": "subscribe",\n  "args": [\n    "order.sbe.resp.linear",\n    "order.sbe.resp.spot",\n    "order.sbe.resp.option"\n  ]\n}\n')),(0,a.kt)("h3",{id:"subscription-acknowledgment"},"Subscription Acknowledgment"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "success": true,\n  "ret_msg": "",\n  "conn_id": "d30fdpbboasp1pjbe7r0",\n  "req_id": "abc123",\n  "op": "subscribe"\n}\n')),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"push-logic-fastresporder"},"Push Logic (fast.resp.order)"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"fast.resp.order")," messages are ",(0,a.kt)("strong",{parentName:"p"},"actively pushed")," to clients when the order is ",(0,a.kt)("strong",{parentName:"p"},"initiated by the user")," (active trading actions)."),(0,a.kt)("h3",{id:"scenario-coverage"},"Scenario Coverage"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Scenario / Event"),(0,a.kt)("th",{parentName:"tr",align:null},"Push via Fast Order Channel"),(0,a.kt)("th",{parentName:"tr",align:null},"Notes"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Maker order new (accepted / ack)"),(0,a.kt)("td",{parentName:"tr",align:null},"Yes"),(0,a.kt)("td",{parentName:"tr",align:null},"Pushes ",(0,a.kt)("inlineCode",{parentName:"td"},"orderStatus = New")," when maker order is accepted.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Maker order filled / partial filled"),(0,a.kt)("td",{parentName:"tr",align:null},"No"),(0,a.kt)("td",{parentName:"tr",align:null},"Fast Order channel ",(0,a.kt)("strong",{parentName:"td"},"does not push fill updates"),"; only active place/amend/cancel.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Taker order (active side)"),(0,a.kt)("td",{parentName:"tr",align:null},"Yes"),(0,a.kt)("td",{parentName:"tr",align:null},"All active actions initiated by client (place / amend / cancel) as taker or active side.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"COT (CloseOnTrigger) order"),(0,a.kt)("td",{parentName:"tr",align:null},"Yes (triggered order)"),(0,a.kt)("td",{parentName:"tr",align:null},"Triggered COT order acts like a new taker order; pushed when it becomes active.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"RO / ReduceOnly order"),(0,a.kt)("td",{parentName:"tr",align:null},"Yes"),(0,a.kt)("td",{parentName:"tr",align:null},"Normal push; if rejected due to cost or position, rejection is returned.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Condition / TP-SL triggered order"),(0,a.kt)("td",{parentName:"tr",align:null},"Yes"),(0,a.kt)("td",{parentName:"tr",align:null},"Once condition triggers and order becomes active, it is pushed.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"DCP (Disconnect All Protection)"),(0,a.kt)("td",{parentName:"tr",align:null},"Yes"),(0,a.kt)("td",{parentName:"tr",align:null},"Pushes when DCP forcibly cancels orders on disconnect.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"SMP cancel-taker / Cancel Both (Self Match Protection)"),(0,a.kt)("td",{parentName:"tr",align:null},"Yes"),(0,a.kt)("td",{parentName:"tr",align:null},"Only the ",(0,a.kt)("strong",{parentName:"td"},"cancel-taker")," variant pushes.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"SMP cancel-maker"),(0,a.kt)("td",{parentName:"tr",align:null},"No"),(0,a.kt)("td",{parentName:"tr",align:null},"Maker-side cancellation not pushed.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"MMP (Market Maker Protection)"),(0,a.kt)("td",{parentName:"tr",align:null},"No"),(0,a.kt)("td",{parentName:"tr",align:null},"MMP trigger cancels not pushed in fast order channel.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Delist / Contract expiry / Option delivery"),(0,a.kt)("td",{parentName:"tr",align:null},"No"),(0,a.kt)("td",{parentName:"tr",align:null},"System-initiated close; no fast order push.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Order reject (matching / validation reject)"),(0,a.kt)("td",{parentName:"tr",align:null},"Yes"),(0,a.kt)("td",{parentName:"tr",align:null},"Pushed immediately with ",(0,a.kt)("inlineCode",{parentName:"td"},"rejectReason"),".")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Amend success / reject"),(0,a.kt)("td",{parentName:"tr",align:null},"Yes"),(0,a.kt)("td",{parentName:"tr",align:null},"Active amend ack / reject are pushed.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Cancel success / reject"),(0,a.kt)("td",{parentName:"tr",align:null},"Yes"),(0,a.kt)("td",{parentName:"tr",align:null},"Active cancel ack / reject are pushed.")))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\ud83d\udca1 Note:",(0,a.kt)("br",{parentName:"p"}),"\n","Upon channel ",(0,a.kt)("strong",{parentName:"p"},"restart")," or ",(0,a.kt)("strong",{parentName:"p"},"re-subscription"),", pushes start from the ",(0,a.kt)("strong",{parentName:"p"},"latest matching event")," \u2014 the focus is ",(0,a.kt)("strong",{parentName:"p"},"speed, not backfill"),".")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"orderlinkid-behavior-by-version"},"OrderLinkId Behavior by Version"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Scenario"),(0,a.kt)("th",{parentName:"tr",align:"right"},"2025 Testnet"),(0,a.kt)("th",{parentName:"tr",align:"right"},"2025 Mainnet"),(0,a.kt)("th",{parentName:"tr",align:null},"Notes"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Active new order (user-initiated)"),(0,a.kt)("td",{parentName:"tr",align:"right"},"Present"),(0,a.kt)("td",{parentName:"tr",align:"right"},"Present"),(0,a.kt)("td",{parentName:"tr",align:null},"Client-initiated place includes user ",(0,a.kt)("inlineCode",{parentName:"td"},"orderLinkId"),".")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Amend / Cancel (user-initiated)"),(0,a.kt)("td",{parentName:"tr",align:"right"},"Present"),(0,a.kt)("td",{parentName:"tr",align:"right"},"Present"),(0,a.kt)("td",{parentName:"tr",align:null},"Client-initiated amend/cancel includes ",(0,a.kt)("inlineCode",{parentName:"td"},"orderLinkId"),".")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Maker \u2192 Taker transition (e.g., price amend)"),(0,a.kt)("td",{parentName:"tr",align:"right"},"Present"),(0,a.kt)("td",{parentName:"tr",align:"right"},"Present"),(0,a.kt)("td",{parentName:"tr",align:null},"Transition caused by client action includes linkId.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Active new conditional order (user-initiated)"),(0,a.kt)("td",{parentName:"tr",align:"right"},"Present"),(0,a.kt)("td",{parentName:"tr",align:"right"},"Present"),(0,a.kt)("td",{parentName:"tr",align:null},"Conditional orders initiated by user include linkId.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Position set trading stop order"),(0,a.kt)("td",{parentName:"tr",align:"right"},"Empty"),(0,a.kt)("td",{parentName:"tr",align:"right"},"Empty"),(0,a.kt)("td",{parentName:"tr",align:null},"System-created; ",(0,a.kt)("strong",{parentName:"td"},"no")," ",(0,a.kt)("inlineCode",{parentName:"td"},"orderLinkId"),".")))),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"message-structure-sbe"},"Message Structure (SBE)"),(0,a.kt)("p",null,"Fast Order pushes are encoded using a dedicated SBE schema."),(0,a.kt)("h3",{id:"fastorderresp-field-reference"},"FastOrderResp Field Reference"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Message:")," ",(0,a.kt)("inlineCode",{parentName:"p"},"FastOrderResp")," (template id = 21000)"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"right"},"Field ID"),(0,a.kt)("th",{parentName:"tr",align:null},"Name"),(0,a.kt)("th",{parentName:"tr",align:null},"Type"),(0,a.kt)("th",{parentName:"tr",align:null},"Unit / Format"),(0,a.kt)("th",{parentName:"tr",align:null},"Description / Notes"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"right"},"1"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"category")),(0,a.kt)("td",{parentName:"tr",align:null},"uint8"),(0,a.kt)("td",{parentName:"tr",align:null},"enum (1\u20134)"),(0,a.kt)("td",{parentName:"tr",align:null},"Market category \u2014 ",(0,a.kt)("inlineCode",{parentName:"td"},"1=spot"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"2=linear"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"3=inverse"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"4=option"),".")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"right"},"2"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"side")),(0,a.kt)("td",{parentName:"tr",align:null},"uint8"),(0,a.kt)("td",{parentName:"tr",align:null},"enum (1\u20132)"),(0,a.kt)("td",{parentName:"tr",align:null},"Order side \u2014 ",(0,a.kt)("inlineCode",{parentName:"td"},"1=Buy"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"2=Sell"),".")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"right"},"3"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"../../enum#sbe-orderstatus"},"orderStatus")),(0,a.kt)("td",{parentName:"tr",align:null},"uint8"),(0,a.kt)("td",{parentName:"tr",align:null},"enum (5-9)"),(0,a.kt)("td",{parentName:"tr",align:null},"Order status")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"right"},"4"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"priceExponent")),(0,a.kt)("td",{parentName:"tr",align:null},"int8"),(0,a.kt)("td",{parentName:"tr",align:null},"exponent"),(0,a.kt)("td",{parentName:"tr",align:null},"Decimal places for price. ",(0,a.kt)("inlineCode",{parentName:"td"},"displayPrice = mantissa / 10^priceExponent"),".")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"right"},"5"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"sizeExponent")),(0,a.kt)("td",{parentName:"tr",align:null},"int8"),(0,a.kt)("td",{parentName:"tr",align:null},"exponent"),(0,a.kt)("td",{parentName:"tr",align:null},"Decimal places for size (quantity). ",(0,a.kt)("inlineCode",{parentName:"td"},"displaySize = mantissa / 10^sizeExponent"),".")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"right"},"6"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"valueExponent")),(0,a.kt)("td",{parentName:"tr",align:null},"int8"),(0,a.kt)("td",{parentName:"tr",align:null},"exponent"),(0,a.kt)("td",{parentName:"tr",align:null},"Decimal places for value (spot buy notional).")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"right"},"7"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"../../enum#sbe-rejectreason"},"rejectReason")),(0,a.kt)("td",{parentName:"tr",align:null},"uint16"),(0,a.kt)("td",{parentName:"tr",align:null},"code"),(0,a.kt)("td",{parentName:"tr",align:null},"Rejection code (0 if not applicable)")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"right"},"8"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"price")),(0,a.kt)("td",{parentName:"tr",align:null},"int64"),(0,a.kt)("td",{parentName:"tr",align:null},"mantissa"),(0,a.kt)("td",{parentName:"tr",align:null},"Order price mantissa; apply ",(0,a.kt)("inlineCode",{parentName:"td"},"priceExponent"),".")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"right"},"9"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"qty")),(0,a.kt)("td",{parentName:"tr",align:null},"int64"),(0,a.kt)("td",{parentName:"tr",align:null},"mantissa"),(0,a.kt)("td",{parentName:"tr",align:null},"Original order quantity mantissa; apply ",(0,a.kt)("inlineCode",{parentName:"td"},"sizeExponent"),".")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"right"},"10"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"leavesQty")),(0,a.kt)("td",{parentName:"tr",align:null},"int64"),(0,a.kt)("td",{parentName:"tr",align:null},"mantissa"),(0,a.kt)("td",{parentName:"tr",align:null},"Remaining unfilled quantity mantissa; apply ",(0,a.kt)("inlineCode",{parentName:"td"},"sizeExponent"),".")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"right"},"11"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"value")),(0,a.kt)("td",{parentName:"tr",align:null},"int64"),(0,a.kt)("td",{parentName:"tr",align:null},"mantissa"),(0,a.kt)("td",{parentName:"tr",align:null},"Spot buy only; initial value mantissa; apply ",(0,a.kt)("inlineCode",{parentName:"td"},"valueExponent"),", otherwise ",(0,a.kt)("inlineCode",{parentName:"td"},"0"),".")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"right"},"12"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"leavesValue")),(0,a.kt)("td",{parentName:"tr",align:null},"int64"),(0,a.kt)("td",{parentName:"tr",align:null},"mantissa"),(0,a.kt)("td",{parentName:"tr",align:null},"Spot buy only; remaining value mantissa; apply ",(0,a.kt)("inlineCode",{parentName:"td"},"valueExponent"),", otherwise ",(0,a.kt)("inlineCode",{parentName:"td"},"0"),".")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"right"},"13"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"creationTime")),(0,a.kt)("td",{parentName:"tr",align:null},"int64"),(0,a.kt)("td",{parentName:"tr",align:null},"microseconds"),(0,a.kt)("td",{parentName:"tr",align:null},"Order creation timestamp in Fast Order channel.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"right"},"14"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"updatedTime")),(0,a.kt)("td",{parentName:"tr",align:null},"int64"),(0,a.kt)("td",{parentName:"tr",align:null},"microseconds"),(0,a.kt)("td",{parentName:"tr",align:null},"Matching engine timestamp when order was updated.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"right"},"15"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"seq")),(0,a.kt)("td",{parentName:"tr",align:null},"int64"),(0,a.kt)("td",{parentName:"tr",align:null},"sequential ID"),(0,a.kt)("td",{parentName:"tr",align:null},"Cross sequence ID.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"right"},"100"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"symbolName")),(0,a.kt)("td",{parentName:"tr",align:null},"varString8"),(0,a.kt)("td",{parentName:"tr",align:null},"UTF-8 string (1-byte length)"),(0,a.kt)("td",{parentName:"tr",align:null},"Symbol name (e.g., ",(0,a.kt)("inlineCode",{parentName:"td"},"BTCUSDT"),").")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"right"},"101"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"orderId")),(0,a.kt)("td",{parentName:"tr",align:null},"varString8"),(0,a.kt)("td",{parentName:"tr",align:null},"UTF-8 string"),(0,a.kt)("td",{parentName:"tr",align:null},"Order unique identifier (UUID).")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"right"},"102"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"orderLinkId")),(0,a.kt)("td",{parentName:"tr",align:null},"varString8"),(0,a.kt)("td",{parentName:"tr",align:null},"UTF-8 string"),(0,a.kt)("td",{parentName:"tr",align:null},"Optional client-side identifier (present for user-initiated orders).")))),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"sbe-xml-template-fast-order-response"},"SBE XML Template (Fast Order Response)"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<sbe:messageSchema xmlns:sbe="http://fixprotocol.io/2016/sbe"\n                   xmlns:mbx="https://bybit-exchange.github.io/docs/v5/intro"\n                   package="order.fast.sbe"\n                   id="1"\n                   version="0"\n                   semanticVersion="1.0.0"\n                   description="Bybit fast order response SBE schema"\n                   byteOrder="littleEndian"\n                   headerType="messageHeader">\n\n  <types>\n    <composite name="messageHeader" description="Template ID and length of message root">\n      <type name="blockLength" primitiveType="uint16"/>\n      <type name="templateId" primitiveType="uint16"/>\n      <type name="schemaId" primitiveType="uint16"/>\n      <type name="version" primitiveType="uint16"/>\n    </composite>\n\n    <composite name="varString8" description="Variable length UTF-8 string">\n      <type name="length" primitiveType="uint8"/>\n      <type name="varData"\n            length="0"\n            primitiveType="uint8"\n            semanticType="String"\n            characterEncoding="UTF-8"/>\n    </composite>\n  </types>\n\n  \x3c!-- Fast order response: active place/cancel/amend acknowledgements --\x3e\n  <sbe:message name="FastOrderResp" id="21000">\n\n    \x3c!-- Routing / classification --\x3e\n    <field id="1"  name="category"     type="uint8"  description="1=spot, 2=linear, 3=inverse, 4=option"/>\n\n    \x3c!-- Side / status / rejection --\x3e\n    <field id="2"  name="side"         type="uint8"  description="1=Buy, 2=Sell"/>\n    <field id="3"  name="orderStatus"  type="uint8"  description="Order state enum"/>\n\n    \x3c!-- Price / size (mantissas) with exponents --\x3e\n    <field id="4"  name="priceExponent" type="int8"   description="Decimal places for price"/>\n    <field id="5"  name="sizeExponent"  type="int8"   description="Decimal places for size"/>\n    <field id="6"  name="valueExponent" type="int8"   description="Decimal places for value"/>\n    <field id="7"  name="rejectReason"  type="uint16" description="0 if N/A"/>\n\n    <field id="8"  name="price"       type="int64" mbx:exponent="priceExponent" description="Price mantissa"/>\n    <field id="9"  name="qty"         type="int64" mbx:exponent="sizeExponent"  description="Order quantity mantissa"/>\n    <field id="10" name="leavesQty"   type="int64" mbx:exponent="sizeExponent"  description="Remaining quantity mantissa"/>\n    <field id="11" name="value"       type="int64" mbx:exponent="valueExponent" description="Spot market buy only; otherwise 0"/>\n    <field id="12" name="leavesValue" type="int64" mbx:exponent="valueExponent" description="Spot market buy only; otherwise 0"/>\n\n    \x3c!-- Timing --\x3e\n    <field id="13" name="creationTime" type="int64" description="Order creation timestamp in Fast order channel (microseconds)"/>\n    <field id="14" name="updatedTime"  type="int64" description="Matching timestamp (microseconds)"/>\n    <field id="15" name="seq"          type="int64" description="Cross sequence ID"/>\n\n    \x3c!-- SymbolName --\x3e\n    <data id="100" name="symbolName"  type="varString8" description="Symbol name"/>\n\n    \x3c!-- Order identifiers --\x3e\n    <data id="101" name="orderId"     type="varString8" description="Order ID"/>\n    <data id="102" name="orderLinkId" type="varString8" description="Optional; present for user-initiated orders"/>\n\n  </sbe:message>\n</sbe:messageSchema>\n')),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"binary-sample-as-received"},"Binary Sample (as received)"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},'b"R\\x00\nN\\x01\\x00\\x00\\x00\\xdb\\x84\\xd0k\\x00\\x00\\x00\\x00f\\xb7\\x003\\x99\\x01\\x00\\x00\\x02\\x0\n6\\xa1\\xcb\\xa1\\x00\\x00\\x00\\x00\\x00\\xe7\\xda\\x0b\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x\n00\\x00\\x00\\x00\\x00\\x04\\xc8\\xa1\\x00\\x00\\x00\\x00\\x00\nN\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x008\\x01\\x00\\x00\\x00\\x00\\\nx00\\x00v\\xba\\x003\\x99\\x01\\x00\\x00\\x07BTCUSDT"\n')),(0,a.kt)("p",null,"This shows: header (8 bytes), body (fixed-length fields), then ",(0,a.kt)("inlineCode",{parentName:"p"},"varString8")," for the symbol (length byte ",(0,a.kt)("inlineCode",{parentName:"p"},"0x07"),", followed by ",(0,a.kt)("inlineCode",{parentName:"p"},"BTCUSDT"),")."),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"sbe-binary-message"},"SBE Binary Message"),(0,a.kt)("p",null,"Each push on the Fast Order channel is an ",(0,a.kt)("strong",{parentName:"p"},"SBE-encoded binary frame")," (",(0,a.kt)("inlineCode",{parentName:"p"},"opcode = 2"),")."),(0,a.kt)("p",null,"Example (pseudo-decoded):"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "category": 2,\n  "side": 1,\n  "orderStatus": 1,\n  "priceExponent": 2,\n  "sizeExponent": 3,\n  "valueExponent": 4,\n  "rejectReason": 0,\n  "price": 301.23,\n  "qty": 100.0,\n  "leavesQty": 40.0,\n  "value": 30123.0,\n  "leavesValue": 12049.2,\n  "creationTime": 1710000000000000,\n  "updatedTime": 1710000000000500,\n  "seq": 123456789,\n  "symbolName": "BTCUSDT",\n  "orderId": "xxxx",\n  "orderLinkId": "xxxx"\n}\n')),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"key-takeaways"},"Key Takeaways"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Aspect"),(0,a.kt)("th",{parentName:"tr",align:null},"Fast Order SBE Channel"),(0,a.kt)("th",{parentName:"tr",align:null},"Standard WS (JSON)"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Encoding"),(0,a.kt)("td",{parentName:"tr",align:null},"SBE (binary)"),(0,a.kt)("td",{parentName:"tr",align:null},"JSON")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Latency"),(0,a.kt)("td",{parentName:"tr",align:null},"Ultra-low (microseconds)"),(0,a.kt)("td",{parentName:"tr",align:null},"Milliseconds")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Data Scope"),(0,a.kt)("td",{parentName:"tr",align:null},"Active user actions only"),(0,a.kt)("td",{parentName:"tr",align:null},"Full lifecycle")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Restart Behavior"),(0,a.kt)("td",{parentName:"tr",align:null},"Starts from latest state"),(0,a.kt)("td",{parentName:"tr",align:null},"Syncs with trading system")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Use Case"),(0,a.kt)("td",{parentName:"tr",align:null},"HFT, Market Makers"),(0,a.kt)("td",{parentName:"tr",align:null},"General trading")))),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"integration-script"},"Integration Script"),(0,a.kt)("h3",{id:"golang"},"Golang"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport (\n    "context"\n    "crypto/hmac"\n    "crypto/sha256"\n    "encoding/binary"\n    "encoding/hex"\n    "encoding/json"\n    "flag"\n    "fmt"\n    "log"\n    "math"\n    "os"\n    "os/signal"\n    "time"\n\n    "github.com/gorilla/websocket"\n)\n\n// ---------- Config ----------\n\nconst (\n    MMWSURLTestnetBybits = "wss://stream-testnet.bybits.org/v5/private"\n)\n\n// TODO: fill in your real keys\nconst (\n    APIKey    = "xxx"\n    APISecret = "xxxxx"\n)\n\nvar subTopics = []string{\n    "order.sbe.resp.linear",\n}\n\n// ---------- SBE helpers ----------\n\nfunc readU8(buf []byte, off *int) (uint8, error) {\n    if *off+1 > len(buf) {\n        return 0, fmt.Errorf("readU8: out of range")\n    }\n    v := buf[*off]\n    *off++\n    return v, nil\n}\n\nfunc readI8(buf []byte, off *int) (int8, error) {\n    if *off+1 > len(buf) {\n        return 0, fmt.Errorf("readI8: out of range")\n    }\n    v := int8(buf[*off])\n    *off++\n    return v, nil\n}\n\nfunc readU16LE(buf []byte, off *int) (uint16, error) {\n    if *off+2 > len(buf) {\n        return 0, fmt.Errorf("readU16LE: out of range")\n    }\n    v := binary.LittleEndian.Uint16(buf[*off : *off+2])\n    *off += 2\n    return v, nil\n}\n\nfunc readI64LE(buf []byte, off *int) (int64, error) {\n    if *off+8 > len(buf) {\n        return 0, fmt.Errorf("readI64LE: out of range")\n    }\n    v := int64(binary.LittleEndian.Uint64(buf[*off : *off+8]))\n    *off += 8\n    return v, nil\n}\n\nfunc readVarString8(buf []byte, off *int) (string, error) {\n    if *off+1 > len(buf) {\n        return "", fmt.Errorf("readVarString8: no length byte")\n    }\n    ln := int(buf[*off])\n    *off++\n    if ln == 0 {\n        return "", nil\n    }\n    if *off+ln > len(buf) {\n        return "", fmt.Errorf("readVarString8: length out of range")\n    }\n    s := string(buf[*off : *off+ln])\n    *off += ln\n    return s, nil\n}\n\n// applyExp replicates the Python apply_exp(mantissa, exp)\nfunc applyExp(mantissa int64, exp int8) float64 {\n    e := int(exp)\n    if e >= 0 {\n        return float64(mantissa) / math.Pow10(e)\n    }\n    return float64(mantissa) * math.Pow10(-e)\n}\n\n// ---------- Fast Order SBE decode ----------\n\ntype FastOrderSBEResp struct {\n    SBEHeader struct {\n        BlockLength uint16 `json:"blockLength"`\n        TemplateID  uint16 `json:"templateId"`\n        SchemaID    uint16 `json:"schemaId"`\n        Version     uint16 `json:"version"`\n    } `json:"_sbe_header"`\n\n    Category            uint8  `json:"category"`\n    Side                uint8  `json:"side"`\n    OrderStatus         uint8  `json:"orderStatus"`\n    PriceExponent       int8   `json:"priceExponent"`\n    SizeExponent        int8   `json:"sizeExponent"`\n    ValExponent         int8   `json:"valueExponent"`\n    RejectReason        uint16 `json:"rejectReason"`\n    PriceMantissa       int64  `json:"priceMantissa"`\n    QtyMantissa         int64  `json:"qtyMantissa"`\n    LeavesQtyMantissa   int64  `json:"leavesQtyMantissa"`\n    ValueMantissa       int64  `json:"valueMantissa"`\n    LeavesValueMantissa int64  `json:"leavesValueMantissa"`\n    CreationTime        int64  `json:"creationTime"`\n    UpdatedTime         int64  `json:"updatedTime"`\n    Seq                 int64  `json:"seq"`\n    SymbolName          string `json:"symbolName"`\n    OrderID             string `json:"orderId"`\n    OrderLinkID         string `json:"orderLinkId"`\n\n    Price       float64 `json:"price"`\n    Qty         float64 `json:"qty"`\n    LeavesQty   float64 `json:"leavesQty"`\n    Value       float64 `json:"value"`\n    LeavesValue float64 `json:"leavesValue"`\n\n    RawOffsetEnd int `json:"_raw_offset_end"`\n}\n\nfunc decodeFastOrderResp(payload []byte, debug bool) (*FastOrderSBEResp, error) {\n    if len(payload) < 8 {\n        return nil, fmt.Errorf("payload too short for SBE header")\n    }\n\n    off := 0\n    blockLen := binary.LittleEndian.Uint16(payload[off : off+2])\n    templateID := binary.LittleEndian.Uint16(payload[off+2 : off+4])\n    schemaID := binary.LittleEndian.Uint16(payload[off+4 : off+6])\n    version := binary.LittleEndian.Uint16(payload[off+6 : off+8])\n    off += 8\n\n    if debug {\n        log.Printf("HEADER: block_len=%d, template_id=%d, schema_id=%d, version=%d",\n            blockLen, templateID, schemaID, version)\n    }\n\n    // Only handle template 21000 for now\n    if templateID != 21000 {\n        return nil, fmt.Errorf("unexpected templateId: %d", templateID)\n    }\n\n    var err error\n    resp := &FastOrderSBEResp{}\n    resp.SBEHeader.BlockLength = blockLen\n    resp.SBEHeader.TemplateID = templateID\n    resp.SBEHeader.SchemaID = schemaID\n    resp.SBEHeader.Version = version\n\n    // fixed fields in order\n    if resp.Category, err = readU8(payload, &off); err != nil {\n        return nil, err\n    }\n    if resp.Side, err = readU8(payload, &off); err != nil {\n        return nil, err\n    }\n    if resp.OrderStatus, err = readU8(payload, &off); err != nil {\n        return nil, err\n    }\n    if resp.PriceExponent, err = readI8(payload, &off); err != nil {\n        return nil, err\n    }\n    if resp.SizeExponent, err = readI8(payload, &off); err != nil {\n        return nil, err\n    }\n    if resp.ValExponent, err = readI8(payload, &off); err != nil {\n        return nil, err\n    }\n    if resp.RejectReason, err = readU16LE(payload, &off); err != nil {\n        return nil, err\n    }\n    if resp.PriceMantissa, err = readI64LE(payload, &off); err != nil {\n        return nil, err\n    }\n    if resp.QtyMantissa, err = readI64LE(payload, &off); err != nil {\n        return nil, err\n    }\n    if resp.LeavesQtyMantissa, err = readI64LE(payload, &off); err != nil {\n        return nil, err\n    }\n    if resp.ValueMantissa, err = readI64LE(payload, &off); err != nil {\n        return nil, err\n    }\n    if resp.LeavesValueMantissa, err = readI64LE(payload, &off); err != nil {\n        return nil, err\n    }\n    if resp.CreationTime, err = readI64LE(payload, &off); err != nil {\n        return nil, err\n    }\n    if resp.UpdatedTime, err = readI64LE(payload, &off); err != nil {\n        return nil, err\n    }\n    if resp.Seq, err = readI64LE(payload, &off); err != nil {\n        return nil, err\n    }\n\n    // strings\n    if resp.SymbolName, err = readVarString8(payload, &off); err != nil {\n        return nil, err\n    }\n    if resp.OrderID, err = readVarString8(payload, &off); err != nil {\n        return nil, err\n    }\n    if resp.OrderLinkID, err = readVarString8(payload, &off); err != nil {\n        return nil, err\n    }\n\n    // derived fields\n    resp.Price = applyExp(resp.PriceMantissa, resp.PriceExponent)\n    resp.Qty = applyExp(resp.QtyMantissa, resp.SizeExponent)\n    resp.LeavesQty = applyExp(resp.LeavesQtyMantissa, resp.SizeExponent)\n    resp.Value = applyExp(resp.ValueMantissa, resp.ValExponent)\n    resp.LeavesValue = applyExp(resp.LeavesValueMantissa, resp.ValExponent)\n    resp.RawOffsetEnd = off\n\n    return resp, nil\n}\n\n// ---------- WebSocket helpers ----------\n\nfunc sendJSON(conn *websocket.Conn, v interface{}) error {\n    data, err := json.Marshal(v)\n    if err != nil {\n        return err\n    }\n    return conn.WriteMessage(websocket.TextMessage, data)\n}\n\nfunc signAuth(secret, value string) string {\n    h := hmac.New(sha256.New, []byte(secret))\n    h.Write([]byte(value))\n    return hex.EncodeToString(h.Sum(nil))\n}\n\nfunc heartbeat(ctx context.Context, conn *websocket.Conn) {\n    ticker := time.NewTicker(10 * time.Second)\n    defer ticker.Stop()\n\n    for {\n        select {\n        case <-ctx.Done():\n            return\n        case <-ticker.C:\n            reqID := fmt.Sprintf("%d", time.Now().UnixMilli())\n            err := sendJSON(conn, map[string]interface{}{\n                "req_id": reqID,\n                "op":     "ping",\n            })\n            if err != nil {\n                log.Printf("[heartbeat] error sending ping: %v", err)\n                return\n            }\n        }\n    }\n}\n\n// ---------- Main run ----------\n\nfunc run(ctx context.Context, url string) error {\n    dialer := websocket.Dialer{\n        HandshakeTimeout:  10 * time.Second,\n        EnableCompression: false,\n    }\n\n    conn, _, err := dialer.Dial(url, nil)\n    if err != nil {\n        return fmt.Errorf("dial error: %w", err)\n    }\n    defer conn.Close()\n    log.Printf("Connected to %s", url)\n\n    // auth\n    expires := (time.Now().Unix() + 10000) * 1000\n    val := fmt.Sprintf("GET/realtime%d", expires)\n    sig := signAuth(APISecret, val)\n\n    authMsg := map[string]interface{}{\n        "req_id": "10001",\n        "op":     "auth",\n        "args":   []interface{}{APIKey, expires, sig},\n    }\n    if err := sendJSON(conn, authMsg); err != nil {\n        return fmt.Errorf("send auth error: %w", err)\n    }\n\n    // auth ack\n    if _, msg, err := conn.ReadMessage(); err != nil {\n        return fmt.Errorf("read auth ack error: %w", err)\n    } else {\n        log.Printf("auth-ack: %s", string(msg))\n    }\n\n    // subscribe\n    subMsg := map[string]interface{}{\n        "op":   "subscribe",\n        "args": subTopics,\n    }\n    if err := sendJSON(conn, subMsg); err != nil {\n        return fmt.Errorf("send subscribe error: %w", err)\n    }\n\n    // heartbeat\n    hbCtx, hbCancel := context.WithCancel(ctx)\n    defer hbCancel()\n    go heartbeat(hbCtx, conn)\n\n    // read loop\n    for {\n        select {\n        case <-ctx.Done():\n            log.Printf("context canceled, exit read loop")\n            return nil\n        default:\n        }\n\n        mt, data, err := conn.ReadMessage()\n        if err != nil {\n            return fmt.Errorf("read message error: %w", err)\n        }\n\n        switch mt {\n        case websocket.BinaryMessage:\n            resp, err := decodeFastOrderResp(data, false)\n            if err != nil {\n                log.Printf("binary decode error: %v", err)\n            } else {\n                j, _ := json.Marshal(resp)\n                log.Printf("FAST_ORDER_SBE: %s", string(j))\n            }\n        case websocket.TextMessage:\n            var obj map[string]interface{}\n            if err := json.Unmarshal(data, &obj); err != nil {\n                log.Printf("text-nonjson: %s", string(data))\n                continue\n            }\n            if op, ok := obj["op"].(string); ok && op == "pong" {\n                // ignore pong\n                continue\n            }\n            j, _ := json.Marshal(obj)\n            log.Printf("control: %s", string(j))\n        default:\n            log.Printf("unknown message type %d", mt)\n        }\n    }\n}\n\n// ---------- Entry ----------\n\nfunc main() {\n    url := flag.String("url", MMWSURLTestnetBybits, "WebSocket URL")\n    flag.Parse()\n\n    if APIKey == "YOUR_API_KEY" || APISecret == "YOUR_API_SECRET" {\n        log.Println("\u26a0\ufe0f Please set APIKey and APISecret in the source before running.")\n    }\n\n    ctx, cancel := signal.NotifyContext(context.Background(), os.Interrupt)\n    defer cancel()\n\n    if err := run(ctx, *url); err != nil {\n        log.Fatalf("run error: %v", err)\n    }\n}\n')),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"python"},"Python"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},'#!/usr/bin/env python3\n# -*- coding: utf-8 -*-\n\nimport asyncio\nimport json\nimport hmac\nimport time\nimport struct\nfrom typing import Tuple, Dict, Any\n\nimport websockets\nimport logging\n\nlogger = logging.getLogger("fast_order")\nlogger.setLevel(logging.INFO)\nhandler = logging.StreamHandler()\nhandler.setFormatter(logging.Formatter("[%(asctime)s] %(levelname)s: %(message)s"))\nlogger.addHandler(handler)\n\nMMWS_URL_TESTNET = "wss://stream-testnet.bybits.org/v5/private"\n\nAPI_KEY = "xxx"\nAPI_SECRET = "xxx"\n\nSUB_TOPICS = ["order.sbe.resp.linear"]\n\n\ndef read_u8(buf: memoryview, off: int) -> Tuple[int, int]:\n    return buf[off], off + 1\n\n\ndef read_i8(buf: memoryview, off: int) -> Tuple[int, int]:\n    b = struct.unpack_from("<b", buf, off)[0]\n    return b, off + 1\n\n\ndef read_u16_le(buf: memoryview, off: int) -> Tuple[int, int]:\n    v = struct.unpack_from("<H", buf, off)[0]\n    return v, off + 2\n\n\ndef read_i64_le(buf: memoryview, off: int) -> Tuple[int, int]:\n    v = struct.unpack_from("<q", buf, off)[0]\n    return v, off + 8\n\n\ndef read_varstring8(buf: memoryview, off: int) -> Tuple[str, int]:\n    ln = buf[off]  # uint8 length\n    off += 1\n    if ln == 0:\n        return "", off\n    s = bytes(buf[off : off + ln]).decode("utf-8", "replace")\n    return s, off + ln\n\n\ndef apply_exp(mantissa: int, exp: int) -> float:\n    if exp >= 0:\n        return mantissa / (10 ** exp)\n    else:\n        return mantissa * (10 ** (-exp))\n\n\ndef decode_fast_order_resp(payload: bytes, debug: bool = False) -> Dict[str, Any]:\n    mv = memoryview(payload)\n    off = 0\n\n    # header (8 bytes)\n    if len(mv) < 8:\n        raise ValueError("payload too short for SBE header")\n\n    block_len, template_id, schema_id, version = struct.unpack_from("<HHHH", mv, off)\n    off += 8\n\n    if debug:\n        print(\n            f"HEADER: block_len={block_len}, template_id={template_id}, "\n            f"schema_id={schema_id}, version={version}"\n        )\n        print("payload hex:", payload.hex())\n\n    if template_id != 21000:\n        return {"_warn": f"unexpected_template_id:{template_id}", "_raw": payload.hex()}\n\n    # fixed fields in schema order\n    category, off = read_u8(mv, off)          # 1\n    side, off = read_u8(mv, off)              # 2\n    order_status, off = read_u8(mv, off)      # 3\n    price_exp, off = read_i8(mv, off)         # 4\n    size_exp, off = read_i8(mv, off)          # 5\n    value_exp, off = read_i8(mv, off)         # 6\n    reject_reason, off = read_u16_le(mv, off) # 7\n    price, off = read_i64_le(mv, off)         # 8\n    qty, off = read_i64_le(mv, off)           # 9\n    leaves_qty, off = read_i64_le(mv, off)    # 10\n    value, off = read_i64_le(mv, off)         # 11\n    leaves_value, off = read_i64_le(mv, off)  # 12\n    creation_time_us, off = read_i64_le(mv, off)  # 13\n    updated_time_us, off = read_i64_le(mv, off)   # 14\n    seq, off = read_i64_le(mv, off)               # 15\n\n    if debug:\n        print("after fixed fields offset:", off)\n\n    symbol_name, off = read_varstring8(mv, off)\n    order_id, off = read_varstring8(mv, off)\n    order_link_id, off = read_varstring8(mv, off)\n\n    out = {\n        "_sbe_header": {\n            "blockLength": block_len,\n            "templateId": template_id,\n            "schemaId": schema_id,\n            "version": version,\n        },\n        "category": category,\n        "side": side,\n        "orderStatus": order_status,\n        "priceExponent": price_exp,\n        "sizeExponent": size_exp,\n        "valueExponent": value_exp,\n        "rejectReason": reject_reason,\n        "priceMantissa": price,\n        "qtyMantissa": qty,\n        "leavesQtyMantissa": leaves_qty,\n        "leavesValueMantissa": leaves_value,\n        "price": apply_exp(price, price_exp),\n        "qty": apply_exp(qty, size_exp),\n        "leavesQty": apply_exp(leaves_qty, size_exp),\n        "value": apply_exp(value, value_exp),\n        "leavesValue": apply_exp(leaves_value, value_exp),\n        "creationTime": creation_time_us,\n        "updatedTime": updated_time_us,\n        "seq": seq,\n        "symbolName": symbol_name,\n        "orderId": order_id,\n        "orderLinkId": order_link_id,\n        "_raw_offset_end": off,\n    }\n    return out\n\n\nasync def send_json(ws, obj):\n    await ws.send(json.dumps(obj, separators=(",", ":")))\n\n\nasync def heartbeat(ws):\n    while True:\n        await asyncio.sleep(10)\n        try:\n            await send_json(\n                ws,\n                {"req_id": str(int(time.time() * 1000)), "op": "ping"},\n            )\n        except Exception:\n            return\n\n\nasync def run(url: str):\n    async with websockets.connect(url, max_size=None) as ws:\n        # auth\n        expires = int((time.time() + 10000) * 1000)\n        _val = f"GET/realtime{expires}"\n        signature = hmac.new(\n            API_SECRET.encode("utf-8"),\n            _val.encode("utf-8"),\n            digestmod="sha256",\n        ).hexdigest()\n\n        await send_json(\n            ws,\n            {\n                "req_id": "10001",\n                "op": "auth",\n                "args": [API_KEY, expires, signature],\n            },\n        )\n\n        # auth ack\n        ack = await ws.recv()\n        logger.info(ack)\n\n        # subscribe topics\n        await send_json(ws, {"op": "subscribe", "args": SUB_TOPICS})\n\n        # heartbeat\n        asyncio.create_task(heartbeat(ws))\n\n        while True:\n            frame = await ws.recv()\n\n            if isinstance(frame, (bytes, bytearray)):\n                try:\n                    decoded = decode_fast_order_resp(frame)\n                    logger.info(json.dumps(decoded, ensure_ascii=False))\n                except Exception as e:\n                    print("binary-decode-error:", e)\n            else:\n                # text JSON\n                try:\n                    obj = json.loads(frame)\n                    if "op" in obj and obj["op"] == "pong":\n                        continue\n                    logger.info(obj)\n                except Exception:\n                    print("text-nonjson:", frame)\n\n\nif __name__ == "__main__":\n    asyncio.run(run(MMWS_URL_TESTNET))\n')))}m.isMDXComponent=!0}}]);