"use strict";(self.webpackChunkdocusaurus_docs=self.webpackChunkdocusaurus_docs||[]).push([[80567],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),s=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=s(e.components);return a.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=s(n),m=r,b=u["".concat(c,".").concat(m)]||u[m]||d[m]||o;return n?a.createElement(b,i(i({ref:t},p),{},{components:n})):a.createElement(b,i({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=u;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},89735:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>b,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var a=n(87462),r=(n(67294),n(3905));const o={title:"Set Disconnect Cancel All",sidebar_label:"Set DCP (Options)",sidebar_position:11},i=void 0,l={unversionedId:"v5/order/dcp",id:"v5/order/dcp",title:"Set Disconnect Cancel All",description:"Covers: Option (Unified Account)",source:"@site/docs/v5/order/dcp.mdx",sourceDirName:"v5/order",slug:"/v5/order/dcp",permalink:"/docs/v5/order/dcp",draft:!1,tags:[],version:"current",sidebarPosition:11,frontMatter:{title:"Set Disconnect Cancel All",sidebar_label:"Set DCP (Options)",sidebar_position:11},sidebar:"v5SideBar",previous:{title:"Get Borrow Quota (Spot)",permalink:"/docs/v5/order/spot-borrow-quota"},next:{title:"Get Position Info",permalink:"/docs/v5/position/"}},c={},s=[{value:"Changes on 4 June",id:"changes-on-4-june",level:2},{value:"HTTP Request",id:"http-request",level:3},{value:"Request Parameters",id:"request-parameters",level:3},{value:"Response Parameters",id:"response-parameters",level:3},{value:"Request Example",id:"request-example",level:3},{value:"Response Example",id:"response-example",level:3}],p=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)},d=p("Tabs"),u=p("TabItem"),m={toc:s};function b(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Covers: Option (Unified Account)"))),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("h2",{parentName:"admonition",id:"what-is-disconnection-protect-dcp"},"What is Disconnection Protect (DCP)?"),(0,r.kt)("p",{parentName:"admonition"},'Based on the websocket private connection and heartbeat mechanism, Bybit provides disconnection protection function. The\ntiming starts from the first disconnection. If the Bybit server does not receive the reconnection from the client for\nmore than 10 (default) seconds and resumes the heartbeat "ping", then the client is in the state of "disconnection protect",\nall active ',(0,r.kt)("strong",{parentName:"p"},"option"),' orders of the client will be cancelled automatically. If within 10 seconds, the client reconnects\nand resumes the heartbeat "ping", the timing will be reset and restarted at the next disconnection.'),(0,r.kt)("h2",{parentName:"admonition",id:"how-to-enable-dcp"},"How to enable DCP"),(0,r.kt)("p",{parentName:"admonition"},"If you need to turn it on/off, you can contact your client manager for consultation and application. The default time window is 10 seconds."),(0,r.kt)("h2",{parentName:"admonition",id:"applicable"},"Applicable"),(0,r.kt)("p",{parentName:"admonition"},"Effective for ",(0,r.kt)("strong",{parentName:"p"},"options")," only.")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"After the request is successfully sent, the system needs a certain time to take effect. It is recommended to query or set again after 10 seconds")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"You can use ",(0,r.kt)("a",{parentName:"li",href:"/v5/account/account-info"},"this endpoint")," to get your current DCP configuration."),(0,r.kt)("li",{parentName:"ul"},"Your private websocket connection ",(0,r.kt)("strong",{parentName:"li"},"must")," subscribe ",(0,r.kt)("a",{parentName:"li",href:"../websocket/private/dcp"},'"dcp" topic')," in order to trigger DCP successfully")),(0,r.kt)("h2",{id:"changes-on-4-june"},"Changes on 4 June"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Only main uid can call this api"),(0,r.kt)("li",{parentName:"ul"},"a new request param added ",(0,r.kt)("inlineCode",{parentName:"li"},"product"),', and its value can be "DERIVATIVES", "SPOT", "OPTIONS"(default)'),(0,r.kt)("li",{parentName:"ul"},"Switch to ",(0,r.kt)("a",{parentName:"li",href:"../account/dcp-info"},"Get DCP Info")," to get your current DCP configuration"),(0,r.kt)("li",{parentName:"ul"},"Once main account is successfully to be configured, all sub accounts DCP will be activated automatically"),(0,r.kt)("li",{parentName:"ul"},"Only UTA accounts can trigger DCP on the trading side and are only applicable to USDT/USDC perpetual, USDC Futures, Spot and Options. Classic accounts cannot actually trigger DCP.")),(0,r.kt)("h3",{id:"http-request"},"HTTP Request"),(0,r.kt)("p",null,"POST ",(0,r.kt)("inlineCode",{parentName:"p"},"/v5/order/disconnected-cancel-all")),(0,r.kt)("h3",{id:"request-parameters"},"Request Parameters"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Parameter"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Required"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Comments"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"timeWindow"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},"true")),(0,r.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,r.kt)("td",{parentName:"tr",align:null},"Disconnection timing window time. ","[",(0,r.kt)("inlineCode",{parentName:"td"},"3"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"300"),"]",", unit: second")))),(0,r.kt)("h3",{id:"response-parameters"},"Response Parameters"),(0,r.kt)("p",null,"None"),(0,r.kt)("h3",{id:"request-example"},"Request Example"),(0,r.kt)(d,{groupId:"programming-languages",mdxType:"Tabs"},(0,r.kt)(u,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-http"},'POST v5/order/disconnected-cancel-all HTTP/1.1\nHost: api.bybit.com\nX-BAPI-SIGN: XXXXX\nX-BAPI-API-KEY: XXXXX\nX-BAPI-TIMESTAMP: 1675852742375\nX-BAPI-RECV-WINDOW: 50000\nContent-Type: application/json\n\n{\n  "timeWindow": 40\n}\n'))),(0,r.kt)(u,{value:"python",label:"Python",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'from pybit.unified_trading import HTTP\nsession = HTTP(\n    testnet=True,\n    api_key="XXXXX",\n    api_secret="XXXXX",\n)\nprint(session.set_dcp(\n    timeWindow=40,\n))\n'))),(0,r.kt)(u,{value:"java",label:"Java",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'import com.bybit.api.client.config.BybitApiConfig;\nimport com.bybit.api.client.domain.trade.request.TradeOrderRequest;\nimport com.bybit.api.client.domain.*;\nimport com.bybit.api.client.domain.trade.*;\nimport com.bybit.api.client.service.BybitApiClientFactory;\nvar client = BybitApiClientFactory.newInstance("YOUR_API_KEY", "YOUR_API_SECRET", BybitApiConfig.TESTNET_DOMAIN).newTradeRestClient();\nvar setDcpOptionsRequest = TradeOrderRequest.builder().timeWindow(40).build();\nSystem.out.println(client.setDisconnectCancelAllTime(setDcpOptionsRequest));\n'))),(0,r.kt)(u,{value:"Node",label:"Node.js",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-n4js"},"const { RestClientV5 } = require('bybit-api');\n\nconst client = new RestClientV5({\n    testnet: true,\n    key: 'apikey',\n    secret: 'apisecret',\n});\n\nclient\n    .setDisconnectCancelAllWindow('option', 40)\n    .then((response) => {\n        console.log(response);\n    })\n    .catch((error) => {\n        console.error(error);\n    });\n")))),(0,r.kt)("h3",{id:"response-example"},"Response Example"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "retCode": 0,\n    "retMsg": "success"\n}\n')))}b.isMDXComponent=!0}}]);